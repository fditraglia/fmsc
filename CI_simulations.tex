%!TEX root = main.tex
\subsection{Confidence Interval Simulations}
\label{sec:CIsim}
I now revisit the simulation experiments introduced above in Sections \ref{sec:OLSvsIVsim} and \ref{sec:chooseIVsim} to evaluate the finite-sample performance of the confidence intervals whose asymptotic performance was studied in Section \ref{sec:limitexperiment} above.
All results in this section are based on 1000 simulation replications from the relevant DGP.
Coverage probabilities and relative widths are all given in percentage points, rounded to the nearest whole percent.
In the interest of brevity I present only results for $N=100$.
Likewise, for the two-step confidence intervals I present results only for $\alpha_1 = \alpha/4, \alpha_2 = 3\alpha/4$.
Simulation results for $N=50$ and $500$ and other configurations of $\alpha_1,\alpha_2$ are available upon request.
Taking $N=100$ has the advantage of making the tables in this section directly comparable to those of Section \ref{sec:limitexperiment}.
Because I set $\sigma_x^2 = \sigma_\epsilon^2 = 1$ in both simulation experiments, this implies that $\sqrt{N}\rho = \sqrt{N} Cor(x_i,\epsilon_i) = \tau$ in the OLS versus TSLS example and $\sqrt{N}\rho = \sqrt{N} Cor(w_i, \epsilon_i) = \tau$ in the choosing IVs example. 
Thus when $N = 100$, taking $\rho \in \{0, 0.1, \dots, 0.5\}$ is the finite-sample analogue of $\tau \in \{0, 1, \dots, 5\}$.

To begin, Tables \ref{tab:CISim100Naive_OLSvsIV} and \ref{tab:CISim100Naive_ChooseIVs} present the coverage probability and average relative width of a na\"{i}ve confidence interval that ignores the effects of moment selection on inference.
These are the finite-sample analogues of Tables \ref{tab:LimitNaiveCover} and \ref{tab:LimitNaiveWidth}.
For the OLS versus IV example, expected relative width is calculated relative to a textbook confidence interval for the TSLS estimator while for the choosing IVs example it is calculated relative to a textbook confidence interval for the valid estimator that excludes $w$ from the instrument set. 
As in the asymptotic calculations presented above, we find that the na\"{i}ve procedure suffers from severe size distortions but results in much shorter intervals.
Results for the 2-Step confidence interval appear in Appendix \ref{append:conf_sim}.
With a small allowance for sampling variability, we see that the 2-step intervals indeed provide uniform coverage no lower than their nominal level but result in wider intervals than simply using TSLS or the valid estimator, respectively.
Tables \ref{tab:CISim100_1stepShort_OLSvsIV} and \ref{tab:CISim100_1stepShort_OLSvsIV}, the finite-sample analogues of Tables \ref{tab:Limit1StepShortOLSvsIV} and \ref{tab:Limit1StepShortChooseIVs} present results for the one-step confidence interval that assumes $\widehat{\tau} = \tau$.
As expected from the asymptotic calculations from Section \ref{sec:limitexperiment}, this interval presents a good trade-off between the na\"{i}ve and 2-step CIs: it can yield shorter intervals with far smaller size distortions.
Because it is also simple to compute, the 1-Step interval could prove quite valuable in practice.
It would be interesting to explore this interval further both theoretically and in simulation studies.




\begin{table}[h]
  \footnotesize
  \centering
  \begin{subtable}{0.48\textwidth}
    \caption{Coverage Probability}
    \input{./AdditionalSimulations/CISimResults/c_naive_OLSvsIV_100.tex}
  \end{subtable}
  ~
  \begin{subtable}{0.48\textwidth}
    \caption{Average Relative Width}
    \input{./AdditionalSimulations/CISimResults/w_naive_OLSvsIV_100.tex}
  \end{subtable}
  \caption{Na\"{i}ve CI, OLS vs IV Example, $N=100$}
  \label{tab:CISim100Naive_OLSvsIV}
\end{table}



\begin{table}[h]
  \footnotesize
  \centering
  \begin{subtable}{0.48\textwidth}
    \caption{Coverage Probability}
    \input{./AdditionalSimulations/CISimResults/c_naive_chooseIVs_100.tex}
  \end{subtable}
  ~
  \begin{subtable}{0.48\textwidth}
    \caption{Average Relative Width}
    \input{./AdditionalSimulations/CISimResults/w_naive_chooseIVs_100.tex}
  \end{subtable}
  \caption{Na\"{i}ve CI, Choosing IVs Example, $N=100$}
  \label{tab:CISim100Naive_ChooseIVs}
\end{table}



\begin{table}[h]
  \footnotesize
  \centering
  \begin{subtable}{0.48\textwidth}
    \caption{Coverage Probability}
    \input{./AdditionalSimulations/CISimResults/c_1short_OLSvsIV_100.tex}
  \end{subtable}
  ~
  \begin{subtable}{0.48\textwidth}
    \caption{Average Relative Width}
    \input{./AdditionalSimulations/CISimResults/w_1short_OLSvsIV_100.tex}
  \end{subtable}
  \caption{1-Step Shortest CI, OLS vs IV Example, $N=100$}
  \label{tab:CISim100_1stepShort_OLSvsIV}
\end{table}


\begin{table}[h]
  \footnotesize
  \centering
  \begin{subtable}{0.48\textwidth}
    \caption{Coverage Probability}
    \input{./AdditionalSimulations/CISimResults/c_1short_chooseIVs_100.tex}
  \end{subtable}
  ~
  \begin{subtable}{0.48\textwidth}
    \caption{Average Relative Width}
    \input{./AdditionalSimulations/CISimResults/w_1short_chooseIVs_100.tex}
  \end{subtable}
  \caption{1-Step Shortest CI, Choosing IVs Example, $N=100$}
  \label{tab:CISim100_1StepShort_ChooseIVs}
\end{table}

